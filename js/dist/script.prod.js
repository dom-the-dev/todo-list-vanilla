"use strict";var addButton=document.getElementById("js-add"),input=document.getElementById("js-input"),todoList=document.getElementById("js-list-todo"),doneList=document.getElementById("js-list-done"),storedTodoItems=JSON.parse(window.localStorage.getItem("todo")),storedCheckedItems=JSON.parse(window.localStorage.getItem("done"));function addTodo(e){var t,d;e.preventDefault(),""!==input.value?(d=(t=document.querySelectorAll(".list-todo li")).length?parseInt(t[t.length-1].getAttribute("data-index"))+1:0,addListElement(input.value,d),saveToStorage(input.value,d),input.value=""):input.classList.add("error")}function addListElement(e,t){var d=createListElement(e,t,!1);d.setAttribute("data-index",t),todoList.appendChild(d)}function saveToStorage(e,t){var d=[];(storedTodoItems=JSON.parse(window.localStorage.getItem("todo")))&&(d=storedTodoItems),d.push({name:e,id:t}),window.localStorage.setItem("todo",JSON.stringify(d))}function removeFromStorage(t){var e=JSON.parse(window.localStorage.getItem("todo")),d=e.find(function(e){return parseInt(e.id)===parseInt(t)}),o=e.indexOf(d);e.splice(o,1),window.localStorage.setItem("todo",JSON.stringify(e))}function createListElement(e,t,d){var o,n,a=document.createTextNode(e),i=document.createElement("li");return i.setAttribute("data-index",t),i.classList.add("listElement"),i.appendChild(a),d||((o=document.createElement("div")).classList.add("buttonWrapper"),(n=document.createElement("button")).innerText="done",n.classList.add="js-done",n.addEventListener("click",checkTodo),o.appendChild(n),i.appendChild(o)),i}function checkTodo(e){e.preventDefault();var t=this.parentElement.parentElement;removeFromStorage(t.getAttribute("data-index"));var d=t.querySelector(".buttonWrapper");t.removeChild(d),doneList.appendChild(t)}addButton.addEventListener("click",addTodo),storedTodoItems&&storedTodoItems.forEach(function(e){addListElement(e.name,e.id)});